# Recipes

This page will provide common testing recipes for components through ReactMD.

# Inputs

## Autocomplete

TODO

## Checkbox

TODO

## Radio

TODO

## Select

> All of these examples will use the [Simple Select](/components/select#simple-select) example code.

### Find and Change Value

This example showcases how to:

- find the `Select` component
- find and verify the current selected option
- change the selected option

```tsx
import { rmdRender, screen, userEvent } from "@react-md/core/test-utils";

it("should be able to change value", async () => {
  const user = userEvent.setup();
  rmdRender(<SimpleSelect />);

  // this is the clickable element that allows the listbox of options to appear
  const select = screen.getByRole("combobox", { name: "Label" });
  // this stores the current value
  const selectInput = screen.getByRole("textbox", { hidden: true });
  expect(selectInput).toHaveValue("");

  await user.click(select);
  // the `name` should be the accessible text in any of the available options
  await user.click(screen.getByRole("option", { name: "Option 1" }));
  expect(selectInput).toHaveValue("a");

  await user.click(select);

  // the `Option 1` should now be selected
  expect(() =>
    screen.getByRole("option", { name: "Option 1", selected: true })
  ).not.toThrow();
});
```

### Verify the Display Value

This example showcases how to find and verify the selected option's display
value while the Select listbox is closed using the `getSelectTestElements` test
util query.

```tsx
import {
  getSelectTestElements,
  rmdRender,
  screen,
  userEvent,
} from "@react-md/core/test-utils";

it("should be able to verify the display value", async () => {
  const user = userEvent.setup();
  rmdRender(<SimpleSelect />);

  const { select, selectInput, selectedOption } = getSelectTestElements({
    name: "Label",
  });
  // this isn't required, but added to show what element this is
  expect(selectedOption).toHaveClass("rmd-selected-option");

  // there is currently no selected value
  expect(selectedOption).toHaveTextContent("");

  await user.click(select);
  await user.click(screen.getByRole("option", { name: "Option 1" }));
  expect(selectInput).toHaveValue("a");
  expect(selectedOption).toHaveTextContent("Option 1");
});
```

## Slider

### Find and Change Value

Tests including the `Slider` are generally setup to include verifying the
current value and optionally changing it. The slider element can be found
using `screen.getByRole("slider", { name: "THE_SLIDER_LABEL" })` which can
be used to verify the current numeric value and update through touch, drag,
or keyboard events.

Since updating through touch, drag, or keyboard events aren't convenient for
tests, it's recommended to find the hidden `<input type="range" />` and trigger
a change event on that instead and could be found by
`screen.getByRole("slider", { name: "", hidden: true })`.

ReactMD provides a React Testing Library query named `getSliderTestElements`
that can be used to get the `slider` element and the `sliderInput`.

```tsx
import {
  fireEvent,
  getSliderTestElements,
  rmdRender,
  screen,
} from "@react-md/core/test-utils";

it("should be able to change the value", async () => {
  rmdRender(<HorizontalSlider />);

  // `name` is the accessible label for the `Slider`
  const { slider, sliderInput } = getSliderTestElements({ name: "Slider" });
  expect(slider).toHaveValue(50);
  expect(sliderInput).toHaveValue("50");

  fireEvent.change(sliderInput, { target: { value: "80" } });
  expect(slider).toHaveValue(80);
  expect(sliderInput).toHaveValue("80");
});
```

### Find and Change Value (Range Slider)

ReactMD provides another React Testing Library query named `getRangeSliderTestElements`
that can be used for a range slider. It will return the `minSlider`,
`minSliderInput`, `maxSlider`, and `maxSliderInput` allowing the values to be
verified like the normal slider.

```tsx
import {
  fireEvent,
  getRangeSliderTestElements,
  rmdRender,
  screen,
} from "@react-md/core/test-utils";

import RangeSlider from "../RangeSlider.jsx";

it("should be able to change the value", async () => {
  rmdRender(<RangeSlider defaultValue={[30, 60]} />);

  const { minSlider, minSliderInput, maxSlider, maxSliderInput } =
    getRangeSliderTestElements();
  expedct(minSlider).toHaveValue(30);
  expedct(minSliderInput).toHaveValue("30");
  expedct(maxSlider).toHaveValue(60);
  expedct(maxSliderInput).toHaveValue("60");

  fireEvent.change(minSliderInput, { target: { value: "50" } });
  expect(slider).toHaveValue(50);
  expect(sliderInput).toHaveValue("50");
  expedct(maxSlider).toHaveValue(60);
  expedct(maxSliderInput).toHaveValue("60");
});
```

## Switch

### Find and Toggle

The `Switch` is an extension of an `<input type="checkbox">` with
`role="switch"`, so the element can be changed just like a `Checkbox`.

```tsx
import { rmdRender, screen, userEvent } from "@react-md/core/test-utils";

it("should be able to change the checked state", async () => {
  const user = userEvent.setup();
  rmdRender(<Switch label="Label" />);

  const switchElement = screen.getByRole("switch", { name: "Label" });
  expect(switchElement).not.toBeChecked();

  await user.click(switchElement);
  expect(switchElement).toBeChecked();
});
```

# Presentation

## Tooltip

TODO

# Navigation

## Menu

TODO

## Tabs

TODO

## Tree

TODO

# Feedback

## Dialog/Sheet

TODO

## Snackbar

TODO

# Layout

## Expansion Panel

TODO
